<ngx-ui-loader fgsColor="#ff9800" fgsType="rectangle-bounce">
</ngx-ui-loader>


<div class="main-content">
  <div *ngIf="
      isNewUser()
      then new_user
      else existing
    ">
  </div>
</div>

<ng-template #existing>
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-10">
        <h3 *ngIf="drafts.length" class="card-title">
          You are working on these drafts
        </h3>
      </div>
      <div *ngIf="drafts.length" class="col-md-2" style="padding-top: 1em;">
        <button mat-raised-button class="btn btn-warning btn-sm" [routerLink]="['/dashboard/drafts',{ type: 'drafts'}]">
          View All ({{drafts.length}}) <i class="material-icons">keyboard_arrow_right</i>
        </button>
      </div>
    </div>
    <br />
    <div class="row">
      <div class="col-md-3" *ngFor="let problem of drafts; let i = index">
        <app-problem-card *ngIf="i < 4" [problemData]="problem"></app-problem-card>
      </div>
    </div>

    <div class="row">
      <div class="col-md-10">
        <h3 *ngIf="userProblems.length" class="card-title">
          Problems added by you
        </h3>
      </div>
      <div *ngIf="userProblems.length" class="col-md-2" style="padding-top: 1em;">
        <button mat-raised-button class="btn btn-warning btn-sm"
          [routerLink]="['/dashboard/problems',{ type: 'problems'}]">
          View All ({{userProblems.length}}) <i class="material-icons">keyboard_arrow_right</i>
        </button>
      </div>
    </div>
    <br />
    <div class="row">
      <div class="col-md-3" *ngFor="let problem of userProblems; let i = index">
        <app-problem-card *ngIf="i < 4" [problemData]="problem"></app-problem-card>
      </div>
    </div>

    <div class="row">
      <div class="col-md-10">
        <h3 *ngIf="objectKeys(contributions).length > 0" class="card-title">
          Your contributions
        </h3>
      </div>
      <div *ngIf="objectKeys(contributions).length > 0" class="col-md-2" style="padding-top: 1em;">
        <button mat-raised-button class="btn btn-warning btn-sm"
          [routerLink]="['/dashboard/contributions',{ type: 'contributions'}]">
          View All ({{objectKeys(contributions).length}}) <i class="material-icons">keyboard_arrow_right</i>
        </button>
      </div>
    </div>
    <br />
    <div class="row">
      <div class="col-md-3" *ngFor="let problem of objectValues(contributions); let i = index">
        <app-problem-card *ngIf="i < 4" [problemData]="problem"></app-problem-card>
      </div>
    </div>

    <div class="row">
      <div class="col-md-10">
        <h3 *ngIf="objectKeys(recommendedProblems).length > 0" class="card-title">
          Problems you may be interested in
        </h3>
      </div>
      <div *ngIf="objectKeys(recommendedProblems).length > 0" class="col-md-2" style="padding-top: 1em;">
        <button mat-raised-button class="btn btn-warning btn-sm"
          [routerLink]="['/dashboard/interests',{ type: 'interests'}]">
          View All ({{objectKeys(recommendedProblems).length}}) <i class="material-icons">keyboard_arrow_right</i>
        </button>
      </div>
    </div>
    <br />
    <div class="row">
      <div class="col-md-3" *ngFor="let problem of objectValues(recommendedProblems); let i = index">
        <app-problem-card *ngIf="i < 4" [problemData]="problem"></app-problem-card>
      </div>
    </div>

    <div class="row">
      <div class="col-md-10">
        <h3 *ngIf="objectKeys(recommendedUsers).length > 0" class="card-title">
          People with similar interests
        </h3>
      </div>
      <div *ngIf="objectKeys(recommendedUsers).length > 0" class="col-md-2" style="padding-top: 1em;">
        <button mat-raised-button class="btn btn-warning btn-sm"
          [routerLink]="['/dashboard/recommended-users',{ type: 'users'}]">
          View All ({{objectKeys(recommendedUsers).length}}) <i class="material-icons">keyboard_arrow_right</i>
        </button>
      </div>
    </div>
    <br />
    <div class="row">
      <div class="col-md-3" *ngFor="let user of objectValues(recommendedUsers); let i = index">
        <app-profile-card *ngIf="i < 4" [userData]="user"></app-profile-card>
      </div>
    </div>
  </div>
</ng-template>


<ng-template #new_user>
  <!-- Loader -->
  <div *ngIf="showLoader">
    <div class="loader">
      <svg class="circular" viewBox="25 25 50 50">
        <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />
      </svg>
    </div>
  </div>

  <div *ngIf="!showLoader" class="main-content">
    <div class="container-fluid">
      <h3>New here?</h3>
      <p>
        Why not help enrich some of
        <a [routerLink]="'/problems'">the problems</a> on the platform? Or
        perhaps add a new one?
      </p>
      <p>
        Don't forget to
        <a [routerLink]="'/users/' + auth.currentUserValue.id">update your profile</a>
        so that other users can find you!
      </p>
    </div>
  </div>
</ng-template>