<nav #navbar class="navbar navbar-expand-lg navbar-transparent navbar-absolute navbar-dashboard-fixed">
  <div class="container-fluid">
    <div class="navbar-wrapper">
      <div class="navbar-minimize">
        <button mat-raised-button (click)="minimizeSidebar()" class="btn btn-just-icon btn-white btn-fab btn-round">
          <i class="material-icons text_align-center visible-on-sidebar-regular">more_vert</i>
          <i class="material-icons design_bullet-list-67 visible-on-sidebar-mini">view_list</i>
        </button>
      </div>
      <!-- <a class="navbar-brand" href="{{ getPath() }}"> {{ getTitle() }}</a> -->
    </div>
    <button mat-button class="navbar-toggler btn-no-ripple" type="button" (click)="sidebarToggle()">
      <span class="sr-only">Toggle navigation</span>
      <span class="navbar-toggler-icon icon-bar"></span>
      <span class="navbar-toggler-icon icon-bar"></span>
      <span class="navbar-toggler-icon icon-bar"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navigation">

      <!-- <form class="navbar-form" #log="ngForm" (ngSubmit)="GlobalSearch(log)"> -->
      <div class="input-group no-border">
        <!-- <input type="text" value="" class="form-control" placeholder="Search..." name="searchT" (focus)="onFocus()"
          (blur)="onBlur()" data-toggle="dropdown" [(ngModel)]="searchT" (input)="globalSearch($event.target.value)"
          autocomplete="off"> -->
        <!-- <button mat-raised-button type="submit" class="btn btn-white btn-round btn-just-icon" (click)="onFocus()">
          <i class="material-icons">search</i>
          <div class="ripple-container"></div>
        </button> -->

        <!-- <div class="dropdown-menu col-5"> -->

        <!--PROBLMES DROPDOWN-->
        <!-- <h5 class="dropdown-header"><b>Problems</b></h5>
            <div class="dropdown-divider"></div>
            <div *ngIf="searchInput">
              <div *ngFor="let problem of problemSearchResults"> -->
        <!-- <a class="dropdown-item" style="height: 50px">
                  <app-global-search-cards [problemData]="problem"></app-global-search-cards>
                </a> -->
        <!-- <a class="dropdown-item" style="height: 50px">
                  <p>{{problemSearchResults.title}}</p>
                </a>
              </div>
              <a class="dropdown-item" *ngIf="searchText.length === 0">{{noResult}}</a>
            </div> -->

        <!--SOLUTIONS DROPDOWN-->
        <!-- <h5 class="dropdown-header"><b>Solutions</b></h5>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item"></a> -->

        <!--USERS DROPDOWN-->
        <!-- <h5 class="dropdown-header"><b>User</b></h5>
            <div class="dropdown-divider"></div>
            <div *ngIf="searchUser">
              <div *ngFor="let user of searchUser">
                <a class="dropdown-item">
                  <div [routerLink]="'/profile/'+user.id">
                    <a>{{user.name}}</a>
                    <h6>{{user.email}}</h6>
                  </div>
                </a>
              </div>
              <a class="dropdown-item" *ngIf="searchUser.length === 0">{{noResult}}</a>
            </div> -->

        <!-- </div> -->
      </div>
      <!-- 1 = {{searchT}}<br>
        2 = {{searchText}}
        <div *ngFor="let sd of searchText">
          ID: {{sd.id}}<br>
          TITLE: {{sd.title}}<br>
          DESCRIPTION: {{sd.description}}<br>
          <br>
        </div> -->

      <!-- </form> -->
      <ul class="navbar-nav">
        <button mat-raised-button class="btn btn-white btn-round btn-just-icon" (click)="openSearchComponent()">
          <i class="material-icons">search</i>
          <div class="ripple-container"></div>
        </button>

        <li class="nav-item dropdown">
          <a class="nav-link" href="#pablo" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false">
            <i class="material-icons">notifications</i>
            <span *ngIf="objectValues(notifications).length" class="notification">{{
              objectValues(notifications).length
              }}</span>
            <p>
              <span class="d-lg-none d-md-block">Some Actions</span>
            </p>
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
            <div *ngFor="let notification of objectValues(notifications)">


              <a *ngIf="!notification.enrichment_id && !notification.collaborator && !notification.discussion_id && !notification.validated_by && notification.tag_id && !notification.is_update"
                class="dropdown-item" name="{{ notification.id }}" [routerLink]="
                
                '/problems/' + notification.problem_id
              " (click)="onRead($event)">

                New problem "{{ notification.problemsByproblemId.title }}"
                {{ (notification.is_update && "updated") || "added" }} in sector "{{notification.tag.name}}"


              </a>

              <a *ngIf="!notification.enrichment_id && !notification.collaborator && !notification.discussion_id && !notification.validated_by && !notification.tag_id "
                class="dropdown-item" name="{{ notification.id }}" [routerLink]="
                
                '/problems/' + notification.problem_id
              " (click)="onRead($event)">

                Problem "{{ notification.problemsByproblemId.title }}" is
                {{ (notification.is_update && "updated") || "added" }}


              </a>

              <a *ngIf="notification.enrichment_id" class="dropdown-item" name="{{ notification.id }}"
                (click)="onRead($event)" [routerLink]="
                
                '/problems/' + notification.problem_id
              ">

                Enrichment added for problem "{{ notification.problemsByproblemId.title }}"

              </a>

              <a *ngIf="notification.collaborator" class="dropdown-item" name="{{ notification.id }}"
                (click)="onRead($event)" [routerLink]="
                
                '/problems/' + notification.problem_id
              ">

                New Collaboration on problem "{{ notification.problemsByproblemId.title }}"


              </a>

              <a *ngIf="notification.validated_by" class="dropdown-item" name="{{ notification.id }}"
                (click)="onRead($event)" [routerLink]="
                
                '/problems/' + notification.problem_id
              ">

                Problem "{{ notification.problemsByproblemId.title }}" is validated by an expert

              </a>

              <a *ngIf="notification.discussion_id" class="dropdown-item" name="{{ notification.id }}"
                (click)="onRead($event)" [routerLink]="
                
                '/problems/' + notification.problem_id
              ">

                You were mentioned on discussion "{{ notification.discussion.text}}" on
                problem
                "{{ notification.problemsByproblemId.title }}"

              </a>
            </div>

            <div class="text-center" *ngIf="objectValues(notifications).length > 0; else noNotification">
              <button mat-raised-button class="btn btn-success" (click)="allRead()"
                *ngIf="objectValues(notifications).length > 1">
                Mark all as Read
              </button>
            </div>

            <ng-template #noNotification>
              <a class="dropdown-item disabled" href="javascript.void(0)">No New Notifications</a>
            </ng-template>
          </div>
        </li>
        <!-- <li class="nav-item">
          <a class="nav-link" href="#pablo">
            <i class="material-icons">person</i>
            <p>
              <span class="d-lg-none d-md-block">Account</span>
            </p>
          </a>
        </li> -->
        <li class="nav-item dropdown">
          <a class="nav-link" href="#pablo" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false">
            <div class="photo">
              <img class="img"
                src="{{(usersService.currentUser.photo_url && usersService.currentUser.photo_url.url) ? usersService.currentUser.photo_url.url : './assets/img/default-avatar.png'}}"
                style="border-radius:50%;object-fit: cover;height: 40px;width: 40px;" />
            </div>
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
            <div class="row justify-content-center">
              <h6 style="text-transform: capitalize"><b>{{usersService.currentUser.name}}</b></h6>
            </div>
            <div class="row justify-content-center">
              <h6 style="color: #999">{{usersService.currentUser.organization}}</h6>
            </div>
            <hr>
            <a class="dropdown-item" [routerLink]="'/users/'+auth.currentUserValue.id">My Profile</a>
            <a class="dropdown-item" (click)="logout()" style="cursor: pointer;object-fit: cover;"
              *ngIf="auth.currentUserValue">Logout</a>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>